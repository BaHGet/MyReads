(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(22),a=n.n(s),o=n(10),i=(n(27),n(5)),r=(n(28),n(3)),l=n(8),d=n(0),h=function(e){var t=e.Shelf,n=e.handleMoveToShelf,s=Object(c.useState)(["loading..."]),a=Object(i.a)(s,2),r=a[0],h=a[1],j=Object(c.useState)(!1),u=Object(i.a)(j,2),b=u[0],f=u[1],O=function(e,t){var c=e.target.value;"none"===c&&h((function(e){return e.filter((function(e){return e.id!==t.id}))})),t.shelf&&(h((function(e){return e.filter((function(e){return e.id!==t.id}))})),h((function(e){return[].concat(Object(l.a)(e),[t])}))),n(t,c),f(!b)};return Object(c.useEffect)((function(){h(Object(l.a)(t))}),[b,t]),Object(d.jsxs)("div",{className:"app",children:[Object(d.jsxs)("div",{className:"list-books",children:[Object(d.jsx)("div",{className:"list-books-title",children:Object(d.jsx)("h1",{children:"MyReads"})}),Object(d.jsx)("div",{className:"list-books-content",children:Object(d.jsxs)("div",{className:"bookshelf",children:[Object(d.jsx)("h2",{className:"bookshelf-title",children:"Currently Reading"}),Object(d.jsx)("div",{className:"bookshelf-books",children:Object(d.jsx)("ol",{className:"books-grid",children:r.map((function(e){if("currentlyReading"===e.shelf)return Object(d.jsx)("li",{className:"book-in-shelf",children:Object(d.jsxs)("div",{className:"book",children:[Object(d.jsxs)("div",{className:"book-top",children:[void 0===e.imageLinks?Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundSize:"128px",backgroundRepeat:"no-repeat",backgroundImage:"url(https://islandpress.org/sites/default/files/default_book_cover_2015.jpg)"}}):Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.imageLinks.thumbnail,")")}}),Object(d.jsx)("div",{className:"book-shelf-changer",children:Object(d.jsxs)("select",{defaultValue:"currentlyReading",onChange:function(t){return O(t,e)},id:e.id,children:[Object(d.jsx)("option",{value:"none",className:"disabled-option",disabled:!0,children:"Move to... "}),Object(d.jsx)("option",{value:"currentlyReading",children:"\u2714  Currently Reading"}),Object(d.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(d.jsx)("option",{value:"read",children:"Read"}),Object(d.jsx)("option",{value:"none",children:"None"})]})})]}),Object(d.jsx)("div",{className:"book-title",children:e.title}),void 0!==e.authors?Object(d.jsxs)("div",{className:"book-authors",children:[Object(d.jsx)("h3",{className:"info-list",children:"Authors:"}),Object(d.jsx)("ul",{className:"info-list",children:e.authors.map((function(e){return Object(d.jsx)("li",{children:e},e)}))})]}):Object(d.jsx)("h3",{className:"info-list",children:"No Authors"}),void 0!==e.categories?Object(d.jsxs)("div",{className:"book-details",children:[Object(d.jsx)("h3",{className:"info-list",children:"Categories:"}),Object(d.jsx)("ul",{className:"info-list",children:e.categories.map((function(e){return Object(d.jsx)("li",{children:e},e)}))})]}):Object(d.jsx)("h3",{className:"info-list",children:"No Categories"}),Object(d.jsxs)("div",{className:"book-details",children:[Object(d.jsx)("h3",{className:"info-list",children:"".concat(e.pageCount," Page")}),Object(d.jsx)("h3",{className:"info-list",children:void 0!==e.averageRating?"Rate: ".concat(e.averageRating):"Rating: No Rates"}),Object(d.jsx)("h3",{className:"info-list",children:void 0!==e.ratingsCount?"".concat(e.ratingsCount," Ratings"):""})]}),Object(d.jsxs)("div",{className:"links",children:[Object(d.jsx)("a",{href:e.canonicalVolumeLink,target:"_blank",rel:"noreferrer",children:"Buy"}),Object(d.jsx)("a",{href:e.previewLink,target:"_blank",rel:"noreferrer",children:"Preview"})]})]})},e.id)}))})})]})}),Object(d.jsx)("div",{className:"list-books-content",children:Object(d.jsxs)("div",{className:"bookshelf",children:[Object(d.jsx)("h2",{className:"bookshelf-title",children:"Want to Read"}),Object(d.jsx)("div",{className:"bookshelf-books",children:Object(d.jsx)("ol",{className:"books-grid",children:r.map((function(e){if("wantToRead"===e.shelf)return Object(d.jsx)("li",{className:"book-in-shelf",children:Object(d.jsxs)("div",{className:"book",children:[Object(d.jsxs)("div",{className:"book-top",children:[void 0===e.imageLinks?Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundSize:"128px",backgroundRepeat:"no-repeat",backgroundImage:"url(https://islandpress.org/sites/default/files/default_book_cover_2015.jpg)"}}):Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.imageLinks.thumbnail,")")}}),Object(d.jsx)("div",{className:"book-shelf-changer",children:Object(d.jsxs)("select",{defaultValue:"wantToRead",onChange:function(t){return O(t,e)},id:e.id,children:[Object(d.jsx)("option",{value:"none",className:"disabled-option",disabled:!0,children:"Move to... "}),Object(d.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(d.jsx)("option",{value:"wantToRead",children:"\u2714  Want to Read"}),Object(d.jsx)("option",{value:"read",children:"Read"}),Object(d.jsx)("option",{value:"none",children:"None"})]})})]}),Object(d.jsx)("div",{className:"book-title",children:e.title}),void 0!==e.authors?Object(d.jsxs)("div",{className:"book-authors",children:[Object(d.jsx)("h3",{className:"info-list",children:"Authors:"}),Object(d.jsx)("ul",{className:"info-list",children:e.authors.map((function(e){return Object(d.jsx)("li",{children:e},e)}))})]}):Object(d.jsx)("h3",{className:"info-list",children:"No Authors"}),void 0!==e.categories?Object(d.jsxs)("div",{className:"book-details",children:[Object(d.jsx)("h3",{className:"info-list",children:"Categories:"}),Object(d.jsx)("ul",{className:"info-list",children:e.categories.map((function(e){return Object(d.jsx)("li",{children:e},e)}))})]}):Object(d.jsx)("h3",{className:"info-list",children:"No Categories"}),Object(d.jsxs)("div",{className:"book-details",children:[Object(d.jsx)("h3",{className:"info-list",children:"".concat(e.pageCount," Page")}),Object(d.jsx)("h3",{className:"info-list",children:void 0!==e.averageRating?"Rate: ".concat(e.averageRating):"Rating: No Rates"}),Object(d.jsx)("h3",{className:"info-list",children:void 0!==e.ratingsCount?"".concat(e.ratingsCount," Ratings"):""})]}),Object(d.jsxs)("div",{className:"links",children:[Object(d.jsx)("a",{href:e.canonicalVolumeLink,target:"_blank",rel:"noreferrer",children:"Buy"}),Object(d.jsx)("a",{href:e.previewLink,target:"_blank",rel:"noreferrer",children:"Preview"})]})]})},e.id)}))})})]})}),Object(d.jsx)("div",{className:"list-books-content",children:Object(d.jsxs)("div",{className:"bookshelf",children:[Object(d.jsx)("h2",{className:"bookshelf-title",children:"Read"}),Object(d.jsx)("div",{className:"bookshelf-books",children:Object(d.jsx)("ol",{className:"books-grid",children:r.map((function(e){if("read"===e.shelf)return Object(d.jsx)("li",{className:"book-in-shelf",children:Object(d.jsxs)("div",{className:"book",children:[Object(d.jsxs)("div",{className:"book-top",children:[void 0===e.imageLinks?Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundSize:"128px",backgroundRepeat:"no-repeat",backgroundImage:"url(https://islandpress.org/sites/default/files/default_book_cover_2015.jpg)"}}):Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.imageLinks.thumbnail,")")}}),Object(d.jsx)("div",{className:"book-shelf-changer",children:Object(d.jsxs)("select",{defaultValue:"read",onChange:function(t){return O(t,e)},id:e.id,children:[Object(d.jsx)("option",{value:"none",className:"disabled-option",disabled:!0,children:"Move to... "}),Object(d.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(d.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(d.jsx)("option",{value:"read",children:"\u2714  Read"}),Object(d.jsx)("option",{value:"none",children:"None"})]})})]}),Object(d.jsx)("div",{className:"book-title",children:e.title}),void 0!==e.authors?Object(d.jsxs)("div",{className:"book-authors",children:[Object(d.jsx)("h3",{className:"info-list",children:"Authors:"}),Object(d.jsx)("ul",{className:"info-list",children:e.authors.map((function(e){return Object(d.jsx)("li",{children:e},e)}))})]}):Object(d.jsx)("h3",{className:"info-list",children:"No Authors"}),void 0!==e.categories?Object(d.jsxs)("div",{className:"book-details",children:[Object(d.jsx)("h3",{className:"info-list",children:"Categories:"}),Object(d.jsx)("ul",{className:"info-list",children:e.categories.map((function(e){return Object(d.jsx)("li",{children:e},e)}))})]}):Object(d.jsx)("h3",{className:"info-list",children:"No Categories"}),Object(d.jsxs)("div",{className:"book-details",children:[Object(d.jsx)("h3",{className:"info-list",children:"".concat(e.pageCount," Page")}),Object(d.jsx)("h3",{className:"info-list",children:void 0!==e.averageRating?"Rate: ".concat(e.averageRating):"Rating: No Rates"}),Object(d.jsx)("h3",{className:"info-list",children:void 0!==e.ratingsCount?"".concat(e.ratingsCount," Ratings"):""})]}),Object(d.jsxs)("div",{className:"links",children:[Object(d.jsx)("a",{href:e.canonicalVolumeLink,target:"_blank",rel:"noreferrer",children:"Buy"}),Object(d.jsx)("a",{href:e.previewLink,target:"_blank",rel:"noreferrer",children:"Preview"})]})]})},e.id)}))})})]})})]}),Object(d.jsx)("div",{className:"open-search",children:Object(d.jsx)(o.b,{to:"/Search",children:"Add a book "})})]})},j=n(4),u=n.n(j),b=n(6),f=n(19),O="https://reactnd-books-api.udacity.com",x=localStorage.token;x||(x=localStorage.token=Math.random().toString(36).substr(-8));var g={Accept:"application/json",Authorization:x},v=function(e,t,n,c){if("search"===e){if(""!==n)(function(){var e=Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c=n,s=void 0,fetch("".concat(O,"/search"),{method:"POST",headers:Object(f.a)(Object(f.a)({},g),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:c,maxResults:s})}).then((function(e){return e.json()})).then((function(e){return e.books})).catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}var c,s}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){t(Object(l.a)(e))})).catch((function(){t("No results")}));""===t&&e([])}"update"===e&&function(){var e=Object(b.a)(u.a.mark((function e(){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s=t,a=n,fetch("".concat(O,"/books/").concat(s.id),{method:"PUT",headers:Object(f.a)(Object(f.a)({},g),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}var s,a}),e)})));return function(){return e.apply(this,arguments)}}()().catch((function(e){console.groupCollapsed("Update error"),console.group(e),console.group("%c Error occured when fetching books when update","background-color:black; font-size:20px;color:red;"),console.groupEnd("Update error")}));"getall"===e&&function(){var e=Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(O,"/books"),{headers:g}).then((function(e){return e.json()})).then((function(e){return e.books})).catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){t(e)})).catch((function(e){console.groupCollapsed("Update error"),console.group(e),console.group("%c Error occured when fetching books when update","background-color:black; font-size:20px;color:red;"),console.groupEnd("Update error")}));"get"===e&&function(){var e=Object(b.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c=t,fetch("".concat(O,"/books/").concat(c),{headers:g}).then((function(e){return e.json()})).then((function(e){return e.book})).catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}var c}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){console.log(e)})).catch((function(){console.log("%c Error occured when fetching books when getAll","background-color:black; font-size:20px;color:red;")}))},p=function(e){var t=e.result,n=e.handleMoveToShelf,s=e.Shelf,a=Object(c.useState)("Type in search box"),o=Object(i.a)(a,2),r=o[0],l=o[1],h=function(e){var c=t.filter((function(t){return t.id===e.target.id})),s=e.target.value;n(c,s)};return Object(c.useEffect)((function(){t!==[]&&null!==t&&"Type in search box"!==t||l("Type in search box"),"No results"===t&&l("No results"),0!==t.length&&"object"==typeof t&&l(Object(d.jsx)("ol",{className:"books-grid",children:t.map((function(e){return s.map((function(t){e.id===t.id&&(e.shelf=t.shelf)})),Object(d.jsx)("li",{className:"book-in-search",children:Object(d.jsxs)("div",{className:"book",children:[Object(d.jsxs)("div",{className:"book-top",children:[void 0===e.imageLinks?Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundSize:"128px",backgroundRepeat:"no-repeat",backgroundImage:"url(https://islandpress.org/sites/default/files/default_book_cover_2015.jpg)"}}):Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.imageLinks.thumbnail,")")}}),e.hasOwnProperty("shelf")?Object(d.jsx)("div",{className:"book-shelf-changer",children:Object(d.jsxs)("select",{onChange:h,id:e.id,defaultValue:e.shelf,children:[Object(d.jsx)("option",{value:"none",className:"disabled-option",children:"Move to... "}),Object(d.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(d.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(d.jsx)("option",{value:"read",children:"Read"}),Object(d.jsx)("option",{value:"none",children:"None"})]})}):Object(d.jsx)("div",{className:"book-shelf-changer",children:Object(d.jsxs)("select",{onChange:h,id:e.id,defaultValue:"None",children:[Object(d.jsx)("option",{value:"none",className:"disabled-option",disabled:!0,children:"Move to... "}),Object(d.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(d.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(d.jsx)("option",{value:"read",children:"Read"}),Object(d.jsx)("option",{value:"None",children:"None"})]})})]}),Object(d.jsx)("div",{className:"book-title",children:e.title}),void 0!==e.authors?Object(d.jsxs)("div",{className:"book-authors",children:[Object(d.jsx)("h3",{className:"info-list",children:"Authors:"}),Object(d.jsx)("ul",{className:"info-list",children:e.authors.map((function(e){return Object(d.jsx)("li",{children:e},e)}))})]}):"No Authors"]})},e.id)}))}))}),[t]),r},m=function(e){var t=e.handleMoveToShelf,n=e.Shelf,s=Object(c.useState)([]),a=Object(i.a)(s,2),r=a[0],l=a[1],h=Object(c.useRef)();Object(c.useEffect)((function(){h.current.focus()}),[]);return Object(d.jsxs)("div",{className:"search-books",children:[Object(d.jsxs)("div",{className:"search-books-bar",children:[Object(d.jsx)(o.b,{to:"/",className:"close-search",children:"Close"}),Object(d.jsx)("div",{className:"search-books-input-wrapper",children:Object(d.jsx)("input",{type:"text",placeholder:"Search by title",onChange:function(e){" "===e.target.value&&""===e.target.value||v("search",l,e.target.value),0!==e.target.value.length&&" "!==e.target.value||(0===e.target.value.length&&setInterval((function(){window.location.reload()}),10),l("Type in search box"))},ref:h})})]}),Object(d.jsx)("div",{className:"search-books-results",children:Object(d.jsx)("div",{className:"books-grid",children:Object(d.jsx)(p,{result:r,handleMoveToShelf:t,Shelf:n})})})]})};var k=function(){var e=Object(c.useState)([""]),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(!0),o=Object(i.a)(a,2),l=o[0],j=o[1],u=function(e,t){e.shelf&&(s((function(t){return t.filter((function(t){return t.id!==e.id}))})),v("update",e,t)),"none"!==t||e.shelf||(s((function(t){return t.filter((function(t){return t.id!==e.id}))})),v("update",e[0],t)),"none"===t||e.shelf||v("update",e[0],t),setInterval((function(){"https://bahget.github.io/MyReads/"!==window.location.href?window.location.href="./":window.location.reload(),console.log(window.location.href,window.location.origin)}),400),j(!l)};return Object(c.useEffect)((function(){v("getall",s)}),[l]),Object(d.jsxs)(r.c,{children:[Object(d.jsx)(r.a,{exact:!0,path:"/MyReads",element:Object(d.jsx)(h,{Shelf:n,handleMoveToShelf:u})}),Object(d.jsx)(r.a,{exact:!0,path:"/Search",element:Object(d.jsx)(m,{handleMoveToShelf:u,Shelf:n})})]})};a.a.render(Object(d.jsx)(o.a,{children:Object(d.jsx)(k,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.04797331.chunk.js.map