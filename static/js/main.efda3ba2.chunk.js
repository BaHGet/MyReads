(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(22),a=n.n(o),s=n(10),r=(n(27),n(5)),i=(n(28),n(3)),l=n(8),d=n(1),h=function(e){var t=e.Shelf,n=e.handleMoveToShelf,o=Object(c.useState)(["loading..."]),a=Object(r.a)(o,2),i=a[0],h=a[1],u=Object(c.useState)(!1),j=Object(r.a)(u,2),b=j[0],f=j[1],O=function(e,t){var c=e.target.value;"none"===c&&h((function(e){return e.filter((function(e){return e.id!==t.id}))})),t.shelf&&(h((function(e){return e.filter((function(e){return e.id!==t.id}))})),h((function(e){return[].concat(Object(l.a)(e),[t])}))),n(t,c),f(!b)};return Object(c.useEffect)((function(){h(Object(l.a)(t))}),[b,t]),Object(d.jsxs)("div",{className:"app",children:[Object(d.jsxs)("div",{className:"list-books",children:[Object(d.jsx)("div",{className:"list-books-title",children:Object(d.jsx)("h1",{children:"MyReads"})}),Object(d.jsx)("div",{className:"list-books-content",children:Object(d.jsxs)("div",{className:"bookshelf",children:[Object(d.jsx)("h2",{className:"bookshelf-title",children:"Currently Reading"}),Object(d.jsx)("div",{className:"bookshelf-books",children:Object(d.jsx)("ol",{className:"books-grid",children:i.map((function(e){if("currentlyReading"===e.shelf)return Object(d.jsx)("li",{children:Object(d.jsxs)("div",{className:"book",children:[Object(d.jsxs)("div",{className:"book-top",children:[void 0===e.imageLinks?Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193},children:"No Iamge"}):Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.imageLinks.thumbnail,")")}}),Object(d.jsx)("div",{className:"book-shelf-changer",children:Object(d.jsxs)("select",{defaultValue:"currentlyReading",onChange:function(t){return O(t,e)},id:e.id,children:[Object(d.jsx)("option",{value:"none",className:"disabled-option",children:"Move to... "}),Object(d.jsx)("option",{value:"currentlyReading",children:"\u2714  Currently Reading"}),Object(d.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(d.jsx)("option",{value:"read",children:"Read"}),Object(d.jsx)("option",{value:"none",children:"None"})]})})]}),Object(d.jsx)("div",{className:"book-title",children:e.title}),Object(d.jsx)("div",{className:"book-authors",children:e.authors})]})},e.id)}))})})]})}),Object(d.jsx)("div",{className:"list-books-content",children:Object(d.jsxs)("div",{className:"bookshelf",children:[Object(d.jsx)("h2",{className:"bookshelf-title",children:"Want to Read"}),Object(d.jsx)("div",{className:"bookshelf-books",children:Object(d.jsx)("ol",{className:"books-grid",children:i.map((function(e){if("wantToRead"===e.shelf)return Object(d.jsx)("li",{children:Object(d.jsxs)("div",{className:"book",children:[Object(d.jsxs)("div",{className:"book-top",children:[void 0===e.imageLinks?Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193},children:"No Iamge"}):Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.imageLinks.thumbnail,")")}}),Object(d.jsx)("div",{className:"book-shelf-changer",children:Object(d.jsxs)("select",{defaultValue:"wantToRead",onChange:function(t){return O(t,e)},id:e.id,children:[Object(d.jsx)("option",{value:"none",className:"disabled-option",children:"Move to... "}),Object(d.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(d.jsx)("option",{value:"wantToRead",children:"\u2714  Want to Read"}),Object(d.jsx)("option",{value:"read",children:"Read"}),Object(d.jsx)("option",{value:"none",children:"None"})]})})]}),Object(d.jsx)("div",{className:"book-title",children:e.title}),Object(d.jsx)("div",{className:"book-authors",children:e.authors})]})},e.id)}))})})]})}),Object(d.jsx)("div",{className:"list-books-content",children:Object(d.jsxs)("div",{className:"bookshelf",children:[Object(d.jsx)("h2",{className:"bookshelf-title",children:"Read"}),Object(d.jsx)("div",{className:"bookshelf-books",children:Object(d.jsx)("ol",{className:"books-grid",children:i.map((function(e){if("read"===e.shelf)return Object(d.jsx)("li",{children:Object(d.jsxs)("div",{className:"book",children:[Object(d.jsxs)("div",{className:"book-top",children:[void 0===e.imageLinks?Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193},children:"No Iamge"}):Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.imageLinks.thumbnail,")")}}),Object(d.jsx)("div",{className:"book-shelf-changer",children:Object(d.jsxs)("select",{defaultValue:"read",onChange:function(t){return O(t,e)},id:e.id,children:[Object(d.jsx)("option",{value:"none",className:"disabled-option",children:"Move to... "}),Object(d.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(d.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(d.jsx)("option",{value:"read",children:"\u2714  Read"}),Object(d.jsx)("option",{value:"none",children:"None"})]})})]}),Object(d.jsx)("div",{className:"book-title",children:e.title}),Object(d.jsx)("div",{className:"book-authors",children:e.authors})]})},e.id)}))})})]})})]}),Object(d.jsx)("div",{className:"open-search",children:Object(d.jsx)(s.b,{to:"/Search",children:"Add a book "})})]})},u=n(4),j=n.n(u),b=n(6),f=n(19),O="https://reactnd-books-api.udacity.com",v=localStorage.token;v||(v=localStorage.token=Math.random().toString(36).substr(-8));var p={Accept:"application/json",Authorization:v},x=function(e,t,n,c){if("search"===e){if(""!==n)(function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c=n,o=void 0,fetch("".concat(O,"/search"),{method:"POST",headers:Object(f.a)(Object(f.a)({},p),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:c,maxResults:o})}).then((function(e){return e.json()})).then((function(e){return e.books})).catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}var c,o}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){t(Object(l.a)(e))})).catch((function(){t("No results")}));""===t&&e([])}"update"===e&&function(){var e=Object(b.a)(j.a.mark((function e(){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o=t,a=n,fetch("".concat(O,"/books/").concat(o.id),{method:"PUT",headers:Object(f.a)(Object(f.a)({},p),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}var o,a}),e)})));return function(){return e.apply(this,arguments)}}()().catch((function(e){console.groupCollapsed("Update error"),console.group(e),console.group("%c Error occured when fetching books when update","background-color:black; font-size:20px;color:red;"),console.groupEnd("Update error")}));"getall"===e&&function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(O,"/books"),{headers:p}).then((function(e){return e.json()})).then((function(e){return e.books})).catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){t(e)})).catch((function(e){console.groupCollapsed("Update error"),console.group(e),console.group("%c Error occured when fetching books when update","background-color:black; font-size:20px;color:red;"),console.groupEnd("Update error")}));"get"===e&&function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c=t,fetch("".concat(O,"/books/").concat(c),{headers:p}).then((function(e){return e.json()})).then((function(e){return e.book})).catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}var c}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){console.log(e)})).catch((function(){console.log("%c Error occured when fetching books when getAll","background-color:black; font-size:20px;color:red;")}))},g=function(e){var t=e.result,n=e.handleMoveToShelf,o=e.Shelf,a=Object(c.useState)("Type in search box"),s=Object(r.a)(a,2),i=s[0],l=s[1],h=function(e){var c=t.filter((function(t){return t.id===e.target.id})),o=e.target.value;n(c,o)};return Object(c.useEffect)((function(){t!==[]&&null!==t&&"Type in search box"!==t||l("Type in search box"),"No results"===t&&l("No results"),0!==t.length&&"object"==typeof t&&l(Object(d.jsx)("ol",{className:"books-grid",children:t.map((function(e){return o.map((function(t){e.id===t.id&&(e.shelf=t.shelf)})),Object(d.jsx)("li",{children:Object(d.jsxs)("div",{className:"book",children:[Object(d.jsxs)("div",{className:"book-top",children:[void 0===e.imageLinks?Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193},children:"No Iamge"}):Object(d.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.imageLinks.thumbnail,")")}}),e.hasOwnProperty("shelf")?Object(d.jsx)("div",{className:"book-shelf-changer",children:Object(d.jsxs)("select",{onChange:h,id:e.id,defaultValue:e.shelf,children:[Object(d.jsx)("option",{value:"none",className:"disabled-option",children:"Move to... "}),Object(d.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(d.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(d.jsx)("option",{value:"read",children:"Read"}),Object(d.jsx)("option",{value:"none",children:"None"})]})}):Object(d.jsx)("div",{className:"book-shelf-changer",children:Object(d.jsxs)("select",{onChange:h,id:e.id,children:[Object(d.jsx)("option",{value:"none",className:"disabled-option",children:"Move to... "}),Object(d.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(d.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(d.jsx)("option",{value:"read",children:"Read"})]})})]}),Object(d.jsx)("div",{className:"book-title",children:e.title}),Object(d.jsx)("div",{className:"book-authors",children:e.authors})]})},e.id)}))}))}),[t]),i},m=function(e){var t=e.handleMoveToShelf,n=e.Shelf,o=Object(c.useState)([]),a=Object(r.a)(o,2),i=a[0],l=a[1],h=Object(c.useRef)();Object(c.useEffect)((function(){h.current.focus()}),[]);return Object(d.jsxs)("div",{className:"search-books",children:[Object(d.jsxs)("div",{className:"search-books-bar",children:[Object(d.jsx)(s.b,{to:"/",className:"close-search",children:"Close"}),Object(d.jsx)("div",{className:"search-books-input-wrapper",children:Object(d.jsx)("input",{type:"text",placeholder:"Search by title",onChange:function(e){" "===e.target.value&&""===e.target.value||x("search",l,e.target.value),0!==e.target.value.length&&" "!==e.target.value||(0===e.target.value.length&&setInterval((function(){window.location.reload()}),10),l("Type in search box"))},ref:h})})]}),Object(d.jsx)("div",{className:"search-books-results",children:Object(d.jsx)("div",{className:"books-grid",children:Object(d.jsx)(g,{result:i,handleMoveToShelf:t,Shelf:n})})})]})};var k=function(){var e=Object(c.useState)([""]),t=Object(r.a)(e,2),n=t[0],o=t[1],a=Object(c.useState)(!0),s=Object(r.a)(a,2),l=s[0],u=s[1],j=function(e,t){e.shelf&&(o((function(t){return t.filter((function(t){return t.id!==e.id}))})),x("update",e,t)),"none"!==t||e.shelf||(o((function(t){return t.filter((function(t){return t.id!==e.id}))})),x("update",e[0],t)),"none"===t||e.shelf||x("update",e[0],t),setInterval((function(){window.location.href=window.location.origin}),400),u(!l)};return Object(c.useEffect)((function(){x("getall",o)}),[l]),Object(d.jsxs)(i.c,{children:[Object(d.jsx)(i.a,{exact:!0,path:"/",element:Object(d.jsx)(h,{Shelf:n,handleMoveToShelf:j})}),Object(d.jsx)(i.a,{exact:!0,path:"/Search",element:Object(d.jsx)(m,{handleMoveToShelf:j,Shelf:n})})]})};a.a.render(Object(d.jsx)(s.a,{children:Object(d.jsx)(k,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.efda3ba2.chunk.js.map